(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const j=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],h=e=>{e.classList.toggle("card__like-button_is-active")},b=e=>{e.remove()},D=()=>document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),g=(e,{onPreviewPicture:t,onLikeIcon:o,onDeleteCard:n})=>{const r=D(),c=r.querySelector(".card__like-button"),s=r.querySelector(".card__control-button_type_delete"),y=r.querySelector(".card__image");return y.src=e.link,y.alt=e.name,r.querySelector(".card__title").textContent=e.name,o&&c.addEventListener("click",()=>o(c)),n&&s.addEventListener("click",()=>n(r)),t&&y.addEventListener("click",()=>t({name:e.name,link:e.link})),r},k=e=>{if(e.key==="Escape"){const t=document.querySelector(".popup_is-opened");p(t)}},l=e=>{e.classList.add("popup_is-opened"),document.addEventListener("keyup",k)},p=e=>{e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",k)},O=e=>{e.querySelector(".popup__close").addEventListener("click",()=>{p(e)}),e.addEventListener("mousedown",o=>{o.target.classList.contains("popup")&&p(e)})};function a(e,t,o,n){const r=e.querySelector(`#${t.id}-error`);r.textContent=o,r.classList.add(n.errorClass),t.classList.add(n.inputErrorClass)}function C(e,t,o){const n=e.querySelector(`#${t.id}-error`);n.textContent="",n.classList.remove(o.errorClass),t.classList.remove(o.inputErrorClass)}function N(e,t,o){if(!t.value.trim()){a(e,t,"Поле обязательно для заполнения",o);return}const n=(t.classList.contains("popup__input_type_name")||t.classList.contains("popup__input_type_card-name"),2),r=t.classList.contains("popup__input_type_name")?40:t.classList.contains("popup__input_type_card-name")?30:t.classList.contains("popup__input_type_description")?200:1/0;if(t.value.length<n||t.value.length>r){let c="";t.classList.contains("popup__input_type_name")||t.classList.contains("popup__input_type_card-name")?c="Длина должна быть от 2 до 40 символов (или 2–30 для названия)":t.classList.contains("popup__input_type_description")?c="Длина должна быть от 2 до 200 символов":t.classList.contains("popup__input_type_url")&&(c="Введите корректную ссылку"),a(e,t,c,o);return}if((t.classList.contains("popup__input_type_name")||t.classList.contains("popup__input_type_card-name"))&&!/^[a-zA-Zа-яА-ЯёЁ\s-]+$/.test(t.value)){const s=t.dataset.errorMessage||"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы";a(e,t,s,o);return}if(t.classList.contains("popup__input_type_url")&&!/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([\/\w .-]*)*\.(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i.test(t.value)){a(e,t,"Введите корректную ссылку",o);return}C(e,t,o)}function W(e,t){const o=e.querySelectorAll(t.inputSelector);return Array.from(o).some(n=>!n.validity.valid)}function x(e,t){const o=e.querySelector(t.submitButtonSelector);o.disabled=!0,o.classList.add(t.inactiveButtonClass)}function $(e,t){const o=e.querySelector(t.submitButtonSelector);o.disabled=!1,o.classList.remove(t.inactiveButtonClass)}function B(e,t){W(e,t)?x(e,t):$(e,t)}function z(e,t){e.querySelectorAll(t.inputSelector).forEach(n=>{n.addEventListener("input",()=>{N(e,n,t),B(e,t)})})}function f(e,t){e.querySelectorAll(t.inputSelector).forEach(n=>{C(e,n,t)}),x(e,t)}function T(e){document.querySelectorAll(e.formSelector).forEach(o=>{o.querySelectorAll(e.inputSelector).forEach(n=>{n.removeEventListener("input",()=>{})}),z(o,e),B(o,e)})}const I=document.querySelector(".places__list"),m=document.querySelector(".popup_type_edit"),d=m.querySelector(".popup__form"),w=d.querySelector(".popup__input_type_name"),F=d.querySelector(".popup__input_type_description"),v=document.querySelector(".popup_type_new-card"),i=v.querySelector(".popup__form"),V=i.querySelector(".popup__input_type_card-name"),R=i.querySelector(".popup__input_type_url"),S=document.querySelector(".popup_type_image"),q=S.querySelector(".popup__image"),K=S.querySelector(".popup__caption"),U=document.querySelector(".profile__edit-button"),Z=document.querySelector(".profile__add-button"),P=document.querySelector(".profile__title"),A=document.querySelector(".profile__description"),E=document.querySelector(".profile__image"),L=document.querySelector(".popup_type_edit-avatar"),u=L.querySelector(".popup__form"),G=u.querySelector(".popup__input"),M=({name:e,link:t})=>{q.src=t,q.alt=e,K.textContent=e,l(S)},H=e=>{e.preventDefault(),P.textContent=w.value,A.textContent=F.value,p(m)},J=e=>{e.preventDefault(),E.style.backgroundImage=`url(${G.value})`,p(L)},Q=e=>{e.preventDefault(),I.prepend(g({name:V.value,link:R.value},{onPreviewPicture:M,onLikeIcon:h,onDeleteCard:b})),p(v)};d.addEventListener("submit",H);i.addEventListener("submit",Q);u.addEventListener("submit",J);U.addEventListener("click",()=>{w.value=P.textContent,F.value=A.textContent,f(d,_),l(m)});E.addEventListener("click",()=>{u.reset(),f(u,_),l(L)});Z.addEventListener("click",()=>{i.reset(),f(i,_),l(v)});j.forEach(e=>{I.append(g(e,{onPreviewPicture:M,onLikeIcon:h,onDeleteCard:b}))});const X=document.querySelectorAll(".popup");X.forEach(e=>{O(e)});const _={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};T(_);
